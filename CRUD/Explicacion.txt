ğŸ§© Proyecto: CRUD de Alumnos con PHP y MySQL (PDO)

ğŸŒ Objetivo general

Desarrollar un sistema bÃ¡sico CRUD (Create, Read, Update, Delete) que permita registrar, listar, editar y eliminar alumnos utilizando PHP, MySQL y HTML.
El propÃ³sito es que el alumno comprenda **cÃ³mo se comunican las pÃ¡ginas PHP con la base de datos y cÃ³mo aplicar **buenas prÃ¡cticas de seguridad y estructura.

---

ğŸ§± 1. Estructura del proyecto

El proyecto estÃ¡ formado por los siguientes archivos principales:

| Archivo       | FunciÃ³n principal                                                             |
| ------------- | ----------------------------------------------------------------------------- |
| `alumnos.sql` | Crea la base de datos y la tabla `alumnos`.                                   |
| `config.php`  | Configura la conexiÃ³n segura con MySQL mediante PDO.                          |
| `index.php`   | PÃ¡gina principal. Permite registrar nuevos alumnos y mostrarlos en una tabla. |
| `edit.php`    | Permite editar los datos (nombre y correo) de un alumno existente.            |
| `delete.php`  | Elimina un alumno de la base de datos.                                        |

---

ğŸ§© 2. Base de datos: `alumnos.sql`

Este archivo contiene las instrucciones para crear la tabla principal:

```sql
CREATE TABLE alumnos (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(120) NOT NULL,
  correo VARCHAR(160) NOT NULL UNIQUE,
  creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

ExplicaciÃ³n:

`id`: identificador Ãºnico que se incrementa automÃ¡ticamente.
`nombre`: nombre completo del alumno.
`correo`: direcciÃ³n de correo Ãºnica.
`creado_en`: guarda la fecha y hora en que se registrÃ³ el alumno.

---

âš™ï¸ 3. ConexiÃ³n con la base de datos: `config.php`

Este archivo se encarga de **establecer una conexiÃ³n segura** entre PHP y MySQL usando **PDO (PHP Data Objects)**.

```php
$dsn = "mysql:host=127.0.0.1;port=8889;dbname=crud;charset=utf8mb4";
$pdo = new PDO($dsn, 'root', 'root', $options);
```

CaracterÃ­sticas principales:

* Se usa el motor PDO, que es mÃ¡s seguro y flexible que `mysqli`.
* Las consultas preparadas evitan ataques de inyecciÃ³n SQL.
* Las opciones activan manejo de errores y formato asociativo para los resultados.

ğŸ’¡ En producciÃ³n, las credenciales deben almacenarse en un archivo `.env`, no directamente en el cÃ³digo.

---

ğŸ§  4. PÃ¡gina principal: `index.php`

Funciones principales:

1. Insertar nuevos alumnos.
2. Mostrar la lista de alumnos existentes.

```php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $stmt = $pdo->prepare("INSERT INTO alumnos (nombre, correo) VALUES (?, ?)");
  $stmt->execute([$_POST['nombre'], $_POST['correo']]);
}
```

ğŸ’¡ Esta estructura garantiza que solo se ejecute la inserciÃ³n cuando el usuario envÃ­a el formulario.

Luego, la pÃ¡gina muestra todos los registros en una tabla:

```php
$alumnos = $pdo->query("SELECT * FROM alumnos ORDER BY id DESC")->fetchAll();
```

En la parte inferior, cada fila tiene enlaces para editar o eliminar registros.

---

âœï¸ 5. EdiciÃ³n de registros: `edit.php`

Permite modificar el nombre o el correo de un alumno especÃ­fico.

1. Se obtiene el `id` desde la URL (`edit.php?id=3`).
2. Se consulta el registro correspondiente.
3. Si el usuario envÃ­a el formulario, se ejecuta la actualizaciÃ³n:

```php
$stmt = $pdo->prepare("UPDATE alumnos SET nombre=?, correo=? WHERE id=?");
$stmt->execute([$_POST['nombre'], $_POST['correo'], $id]);
```

Medidas de seguridad:

* Se usan consultas preparadas (`?`) para evitar inyecciÃ³n SQL.
* Se emplea `htmlspecialchars()` para mostrar los valores sin riesgo de XSS.

---

ğŸ—‘ï¸ 6. EliminaciÃ³n de registros: `delete.php`

Este script borra el alumno seleccionado usando su `id`.

```php
$stmt = $pdo->prepare("DELETE FROM alumnos WHERE id=?");
$stmt->execute([$id]);
```

Antes de eliminar, el usuario confirma la acciÃ³n con una alerta JavaScript:

```html
<a href="delete.php?id=<?= $a['id'] ?>" onclick="return confirm('Â¿Eliminar?')">Eliminar</a>
```

Nota: En aplicaciones reales, se recomienda implementar un â€œborrado lÃ³gicoâ€ (marcar como eliminado en lugar de borrar fÃ­sicamente).

---

ğŸ§® 7. Resumen del flujo de datos

1. index.php â€” Muestra y agrega alumnos.
2. edit.php â€” Permite editar un alumno existente.
3. delete.php â€” Elimina el registro seleccionado.
4. config.php â€” Conecta todos los scripts con la base de datos.
5. alumnos.sql â€” Define la estructura de datos.

---

ğŸ” 8. Buenas prÃ¡cticas aplicadas

âœ… Uso de consultas preparadas con PDO.
âœ… SanitizaciÃ³n de datos con `htmlspecialchars()`.
âœ… SeparaciÃ³n de responsabilidades (cada archivo cumple una funciÃ³n).
âœ… Uso de `exit;` tras redirecciones para evitar ejecuciÃ³n adicional.
âœ… CodificaciÃ³n UTF-8 (`utf8mb4`) para soporte completo de caracteres.

---

ğŸ’¬ 9. Actividad sugerida.

1. Elaboren una nueva tabla llamada `profesores` con los campos `id`, `nombre`, `correo`, `materia`.
2. Dupliquen los archivos PHP y adapten el cÃ³digo para manejar la nueva tabla.
3. Agreguen un campo adicional (`telÃ©fono`) y actualicen el CRUD completo.
4. Implementen validaciones de formato en los formularios.
5. Documenten el flujo en un diagrama (entrada, proceso, salida).

---

ğŸ¯ ConclusiÃ³n

Este proyecto enseÃ±a los fundamentos de la programaciÃ³n web dinÃ¡mica con PHP y MySQL:
cÃ³mo enviar datos desde formularios, cÃ³mo almacenarlos y cÃ³mo manipularlos desde el servidor.
AdemÃ¡s, refuerza conceptos esenciales como la seguridad, la validaciÃ³n y la organizaciÃ³n modular del cÃ³digo.



