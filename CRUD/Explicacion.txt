Proyecto: CRUD de Alumnos con PHP y MySQL (PDO)

üåê Objetivo general

Desarrollar un sistema b√°sico CRUD (Create, Read, Update, Delete) que permita registrar, listar, editar y eliminar alumnos utilizando PHP, MySQL y HTML.
El prop√≥sito es que el alumno comprenda **c√≥mo se comunican las p√°ginas PHP con la base de datos y c√≥mo aplicar **buenas pr√°cticas de seguridad y estructura.

---

1. Estructura del proyecto

El proyecto est√° formado por los siguientes archivos principales:

| Archivo       | Funci√≥n principal                                                             |
| ------------- | ----------------------------------------------------------------------------- |
| `alumnos.sql` | Crea la base de datos y la tabla `alumnos`.                                   |
| `config.php`  | Configura la conexi√≥n segura con MySQL mediante PDO.                          |
| `index.php`   | P√°gina principal. Permite registrar nuevos alumnos y mostrarlos en una tabla. |
| `edit.php`    | Permite editar los datos (nombre y correo) de un alumno existente.            |
| `delete.php`  | Elimina un alumno de la base de datos.                                        |

---

2. Base de datos: `alumnos.sql`

Este archivo contiene las instrucciones para crear la tabla principal:

```sql
CREATE TABLE alumnos (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(120) NOT NULL,
  correo VARCHAR(160) NOT NULL UNIQUE,
  creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

Explicaci√≥n:

`id`: identificador √∫nico que se incrementa autom√°ticamente.
`nombre`: nombre completo del alumno.
`correo`: direcci√≥n de correo √∫nica.
`creado_en`: guarda la fecha y hora en que se registr√≥ el alumno.

---

‚öôÔ∏è 3. Conexi√≥n con la base de datos: `config.php`

Este archivo se encarga de **establecer una conexi√≥n segura** entre PHP y MySQL usando **PDO (PHP Data Objects)**.

```php
$dsn = "mysql:host=127.0.0.1;port=8889;dbname=crud;charset=utf8mb4";
$pdo = new PDO($dsn, 'root', 'root', $options);
```

Caracter√≠sticas principales:

* Se usa el motor PDO, que es m√°s seguro y flexible que `mysqli`.
* Las consultas preparadas evitan ataques de inyecci√≥n SQL.
* Las opciones activan manejo de errores y formato asociativo para los resultados.

En producci√≥n, las credenciales deben almacenarse en un archivo `.env`, no directamente en el c√≥digo.

---

4. P√°gina principal: `index.php`

Funciones principales:

1. Insertar nuevos alumnos.
2. Mostrar la lista de alumnos existentes.

```php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $stmt = $pdo->prepare("INSERT INTO alumnos (nombre, correo) VALUES (?, ?)");
  $stmt->execute([$_POST['nombre'], $_POST['correo']]);
}
```

Esta estructura garantiza que solo se ejecute la inserci√≥n cuando el usuario env√≠a el formulario.

Luego, la p√°gina muestra todos los registros en una tabla:

```php
$alumnos = $pdo->query("SELECT * FROM alumnos ORDER BY id DESC")->fetchAll();
```

En la parte inferior, cada fila tiene enlaces para editar o eliminar registros.

---

5. Edici√≥n de registros: `edit.php`

Permite modificar el nombre o el correo de un alumno espec√≠fico.

1. Se obtiene el `id` desde la URL (`edit.php?id=3`).
2. Se consulta el registro correspondiente.
3. Si el usuario env√≠a el formulario, se ejecuta la actualizaci√≥n:

```php
$stmt = $pdo->prepare("UPDATE alumnos SET nombre=?, correo=? WHERE id=?");
$stmt->execute([$_POST['nombre'], $_POST['correo'], $id]);
```

Medidas de seguridad:

* Se usan consultas preparadas (`?`) para evitar inyecci√≥n SQL.
* Se emplea `htmlspecialchars()` para mostrar los valores sin riesgo de XSS.

---

6. Eliminaci√≥n de registros: `delete.php`

Este script borra el alumno seleccionado usando su `id`.

```php
$stmt = $pdo->prepare("DELETE FROM alumnos WHERE id=?");
$stmt->execute([$id]);
```

Antes de eliminar, el usuario confirma la acci√≥n con una alerta JavaScript:

```html
<a href="delete.php?id=<?= $a['id'] ?>" onclick="return confirm('¬øEliminar?')">Eliminar</a>
```

Nota: En aplicaciones reales, se recomienda implementar un ‚Äúborrado l√≥gico‚Äù (marcar como eliminado en lugar de borrar f√≠sicamente).

---

7. Resumen del flujo de datos

1. index.php ‚Äî Muestra y agrega alumnos.
2. edit.php ‚Äî Permite editar un alumno existente.
3. delete.php ‚Äî Elimina el registro seleccionado.
4. config.php ‚Äî Conecta todos los scripts con la base de datos.
5. alumnos.sql ‚Äî Define la estructura de datos.

---

8. Buenas pr√°cticas aplicadas

* Uso de consultas preparadas con PDO.
* Sanitizaci√≥n de datos con `htmlspecialchars()`.
* Separaci√≥n de responsabilidades (cada archivo cumple una funci√≥n).
* Uso de `exit;` tras redirecciones para evitar ejecuci√≥n adicional.
* Codificaci√≥n UTF-8 (`utf8mb4`) para soporte completo de caracteres.

---

9. Actividad sugerida.

1. Elaboren una nueva tabla llamada `profesores` con los campos `id`, `nombre`, `correo`, `materia`.
2. Dupliquen los archivos PHP y adapten el c√≥digo para manejar la nueva tabla.
3. Agreguen un campo adicional (`tel√©fono`) y actualicen el CRUD completo.
4. Implementen validaciones de formato en los formularios.
5. Documenten el flujo en un diagrama (entrada, proceso, salida).

---

Conclusi√≥n

Este proyecto ense√±a los fundamentos de la programaci√≥n web din√°mica con PHP y MySQL:
c√≥mo enviar datos desde formularios, c√≥mo almacenarlos y c√≥mo manipularlos desde el servidor.
Adem√°s, refuerza conceptos esenciales como la seguridad, la validaci√≥n y la organizaci√≥n modular del c√≥digo.



